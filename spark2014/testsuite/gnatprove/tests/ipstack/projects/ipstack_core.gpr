with "ipstack_config";
with "ipstack_lwip";

project IPStack_Core is
   Subdir := "src/core";
   for Library_Name use "aip-core";
   for Library_Kind use "static";

   for Source_Dirs use ("../" & Subdir, IPStack_Config.Gen_Prefix);
   for Object_Dir      use IPStack_Config.Obj_Prefix & Subdir;
   for Library_Dir     use IPStack_Config.Lib_Prefix & Subdir;
   for Library_ALI_Dir use IPStack_Config.ALI_Prefix & Subdir;

   type Mode_Type is ("Prove", "Compile");
   Mode : Mode_Type := external ("Mode", "Compile");

   case Mode is
      when "Prove" =>
         for Languages use ("Ada", "Metafile");
      when "Compile" =>
         for Languages use ("Ada");
   end case;

   package Compiler is
      for Default_Switches ("Ada")
        use IPStack_Config.Compiler'Default_Switches ("Ada");
   end Compiler;

   package Ide is
      for Default_Switches ("examiner") use 
          ("-flow=data", "-index_file=../src/core/aip.idx", 
           "-config_file=../src/core/config.shs");
   end Ide;
end IPStack_Core;
