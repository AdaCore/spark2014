module Assign

   use import int.Int

   use import ref.Ref

   val glob : ref int
(* Valid *)
   let f (x : ref int)
      requires { true }
      ensures { ! x = 0 }
      =
      x := 0

(* Valid *)
   let g (x : ref int)
      requires { true }
      ensures { ! x = old !x + 1 }
      =
      x := !x + 1

(* Valid *)
   let h (x : ref int)
      requires { true }
      ensures { ! x = !glob }
      =
      x := !glob

(* Valid *)
   let i (x : ref int)
      requires { true }
      ensures { ! x = !glob }
      =
      glob := !x

(* Unknown *)
   let k (x : ref int)
      requires { true }
      ensures { ! x = !glob }
      =
      glob := !glob + 1
end
