\section{Overview}
In the long path through the definition of complete semantics for SPARK 2014, a
very important step is to build a tool chain allowing its application in formal
proof and verification on real SPARK 2014 programs. It also makes it possible to
integrate our SPARK formalization work into GnatProve toolchain to serve as
a trust soundness verification for run-time check flags generated by Gnat
front end.

\paragraph{SPARK Translation Toolchain}
In the front end of this tool chain, Gnat2XML, developed by AdaCore, translates
SPARK programs to a fully resolved Abstract Syntax Tree (AST) XML representation
with an accompanying XML schema. As part of the Sireum analysis framework [5],
we have furtherly developed a tool called Jago [4] that translates XML
representation of the GNAT compiler's ASTs into a Scala-based representation in
Sireum. This open-source framework enables one to build code translators and
analysis tools for SPARK 2014 in Scala. Scalaâ€™s blending of functional and
object-oriented program styles have proven quite useful in other contexts for
syntax tree manipulation and analysis. Integrated into Jago are two kinds of
translations: (1) type translation to translate Gnat2XML-generated XML schema to
(inductive) type definition in Coq; (2) program translation to translate
Gnat2XML-generated AST XML representation into Coq based representations.

\paragraph{Formalization and Proof in Coq}
With Coq inductive type definition for SPARK AST syntax produced by Jago type
translator, formal semantics encoding run-time checks for SPARK has
been developed within Coq, which is refered as SPARK reference semantics.
Besides, a formal semantics for SPARK AST extended with run-time check flags
are defined, where run-time checks are performed only if the appropriate check
flags are set for the operations. And an AST translator from a SPARK AST to a
run-time check flagged AST is provided and proved correct with respect to the
SPARK reference semantics.

\paragraph{Run-Time Checks Verification}
In GnatProve tool chain, the run-time check flags set by its front end during
semantic analysis will trigger the corresponding check in its back end by
applying formal verification method. To verify these run-time check flags, a
check verification function is developed to match them against the
run-time checks required by SPARK reference semantics, and report any mismatchs.
For easy debug, any check mismatching information will be mapped back to the
SPARK source location.



